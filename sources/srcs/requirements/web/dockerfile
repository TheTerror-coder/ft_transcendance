# ARG default values are overriden at build time

FROM python:3.10-alpine

ARG STATICFILES_DIR=/usr/share/www/static

WORKDIR /usr/src/apps

RUN apk add --no-cache curl
RUN mkdir -p /etc/container-init.d ${STATICFILES_DIR}

COPY --chown=root:root --chmod=700 ./tools/requirements.txt .

COPY --chown=root:root --chmod=700 ./tools/script.sh /etc/container-init.d

RUN pip install -r requirements.txt

COPY ./srcs/ .
# COPY ./project_init/ .

# CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]

CMD [ "/etc/container-init.d/script.sh" ]
# ENTRYPOINT [ "tail", "-f", "/dev/null" ]
